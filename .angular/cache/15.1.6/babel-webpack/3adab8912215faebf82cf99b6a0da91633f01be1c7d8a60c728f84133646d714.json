{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/login.service\";\nimport * as i3 from \"../services/empleados.service\";\nimport * as i4 from \"@angular/forms\";\nexport class LoginComponent {\n  constructor(router, ServicioLogin, ServicioEmp) {\n    this.router = router;\n    this.ServicioLogin = ServicioLogin;\n    this.ServicioEmp = ServicioEmp;\n    this.usuario = {\n      nombre: \"\",\n      contra: \"\"\n    };\n  }\n  login() {\n    if (this.usuario.nombre != \"\" && this.usuario.contra != \"\") {\n      this.ServicioLogin.login(this.usuario).subscribe(res => {\n        //QUIEN INICIO SESIÓN \n        if (res.usu.tipo == 1) {\n          //Si es un Empleado \n          this.ServicioLogin.consultarToken(res.usu.nombre).subscribe(res => {\n            console.log(res);\n            alert(\"mensaje\", \"Bienvenido al sistema: \" + res.emp.nombre);\n            localStorage.setItem(\"nombre\", res.emp.nombre);\n            localStorage.setItem(\"puesto\", res.emp.puesto);\n            localStorage.setItem(\"token\", res.emp.jwebtoken);\n            this.router.navigate(['/inicio']);\n          }, err => {});\n        } else if (res.usu.tipo == 2) {//Si es un Cliente\n        }\n        /*console.log(res);\r\n        localStorage.setItem(\"mensaje\", \"Bienvenido al sistema: \" + res.usu.nombre);\r\n        localStorage.setItem(\"nombre\", res.usu.nombre);\r\n        this.router.navigate(['/inicio']);*/\n      }, err => {\n        console.log(err);\n        if (typeof err.error == \"string\") {\n          this.mensaje = err.error;\n        } else {\n          this.mensaje = err.error.error[0].msg;\n          //alert(err.error.error[0].msg);\n        }\n      });\n    } else {\n      this.mensaje = \"Los campos no pueden estar vacios\";\n    }\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.LoginService), i0.ɵɵdirectiveInject(i3.EmpleadosService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 41,\n  vars: 2,\n  consts: [[1, \"login-page\", \"d-flex\", \"align-items-center\", \"bg-gray-100\"], [1, \"container\", \"mb-3\"], [1, \"row\"], [1, \"col-md-6\", \"mx-auto\"], [1, \"card\"], [1, \"card-body\", \"p-5\"], [1, \"text-center\", \"mb-5\"], [\"src\", \"../../assets/img/logonetline.png\", \"alt\", \"\", \"height\", \"80px\"], [\"method\", \"\", \"action\", \"POST\", 1, \"login-form\"], [1, \"card\", \"card-login\", \"card-hidden\"], [1, \"card-header\"], [1, \"header\", \"text-center\"], [1, \"card-body\"], [1, \"form-group\"], [\"for\", \"email\", 1, \"col-md-6\", \"col-form-label\"], [1, \"col-md-14\"], [\"id\", \"email\", \"type\", \"email\", \"name\", \"email\", \"value\", \"\", \"required\", \"\", \"autocomplete\", \"email\", \"autofocus\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"password\", 1, \"col-md-6\", \"col-form-label\"], [\"id\", \"password\", \"type\", \"password\", \"name\", \"password\", \"value\", \"\", \"required\", \"\", \"autocomplete\", \"current-password\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"card-footer\", \"ml-auto\", \"mr-auto\"], [1, \"container\", \"text-center\"], [1, \"btn\", \"btn-warning\", \"btn-wd\", 3, \"click\"], [1, \"d-flex\", \"justify-content-between\"], [\"href\", \"\", 1, \"btn\", \"btn-link\", 2, \"color\", \"#23CCEF\"], [1, \"text-center\", \"position-absolute\", \"bottom-0\", \"start-0\", \"w-100\", \"z-index-20\"], [1, \"container\"], [1, \"copyright\", \"text-center\"], [\"href\", \"#\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"header\", 6);\n      i0.ɵɵelement(7, \"img\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"form\", 8)(9, \"div\", 9)(10, \"div\", 10)(11, \"h3\", 11);\n      i0.ɵɵtext(12, \"Iniciar Sesi\\u00F3n\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"div\", 12)(14, \"div\", 12)(15, \"div\", 13)(16, \"label\", 14);\n      i0.ɵɵtext(17, \"Usuario\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 15)(19, \"input\", 16);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_19_listener($event) {\n        return ctx.usuario.nombre = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(20, \"div\", 13)(21, \"label\", 17);\n      i0.ɵɵtext(22, \"Contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"div\", 15)(24, \"input\", 18);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_24_listener($event) {\n        return ctx.usuario.contra = $event;\n      });\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(25, \"div\", 19)(26, \"div\", 20)(27, \"button\", 21);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_27_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵtext(28, \"Entrar\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(29, \"div\", 22);\n      i0.ɵɵelement(30, \"a\", 23)(31, \"a\", 23);\n      i0.ɵɵelementEnd()()()()()()()()()();\n      i0.ɵɵelementStart(32, \"div\", 24)(33, \"div\", 25)(34, \"nav\")(35, \"p\", 26);\n      i0.ɵɵtext(36, \" \\u00A9 \");\n      i0.ɵɵelementStart(37, \"a\", 27);\n      i0.ɵɵtext(38, \" Netline \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"a\", 27);\n      i0.ɵɵtext(40, \" Universidad Tecnologica de Jalsico \");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(19);\n      i0.ɵɵproperty(\"ngModel\", ctx.usuario.nombre);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.usuario.contra);\n    }\n  },\n  dependencies: [i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;AAUA,OAAM,MAAOA,cAAc;EAOzBC,YAAoBC,MAAc,EAAUC,aAA2B,EAAWC,WAA6B;IAA3F,WAAM,GAANF,MAAM;IAAkB,kBAAa,GAAbC,aAAa;IAAyB,gBAAW,GAAXC,WAAW;IAL7F,YAAO,GAAG;MACRC,MAAM,EAAE,EAAE;MACVC,MAAM,EAAE;KACT;EAID;EAEAC,KAAK;IACH,IAAI,IAAI,CAACC,OAAO,CAACH,MAAM,IAAI,EAAE,IAAI,IAAI,CAACG,OAAO,CAACF,MAAM,IAAI,EAAE,EAAE;MAC1D,IAAI,CAACH,aAAa,CAACI,KAAK,CAAC,IAAI,CAACC,OAAO,CAAC,CAACC,SAAS,CAC7CC,GAAG,IAAI;QAEN;QACA,IAAIA,GAAG,CAACC,GAAG,CAACC,IAAI,IAAI,CAAC,EAAE;UAAE;UACvB,IAAI,CAACT,aAAa,CAACU,cAAc,CAACH,GAAG,CAACC,GAAG,CAACN,MAAM,CAAC,CAACI,SAAS,CACxDC,GAAG,IAAI;YACNI,OAAO,CAACC,GAAG,CAACL,GAAG,CAAC;YAChBM,KAAK,CAAC,SAAS,EAAE,yBAAyB,GAAGN,GAAG,CAACO,GAAG,CAACZ,MAAM,CAAC;YAC5Da,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAET,GAAG,CAACO,GAAG,CAACZ,MAAM,CAAC;YAC9Ca,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAET,GAAG,CAACO,GAAG,CAACG,MAAM,CAAC;YAC9CF,YAAY,CAACC,OAAO,CAAC,OAAO,EAAET,GAAG,CAACO,GAAG,CAACI,SAAS,CAAC;YAChD,IAAI,CAACnB,MAAM,CAACoB,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC;UACnC,CAAC,EACAC,GAAG,IAAI,CAER,CAAC,CACF;SACF,MAAM,IAAIb,GAAG,CAACC,GAAG,CAACC,IAAI,IAAI,CAAC,EAAE,CAAE;QAAA;QAIhC;;;;MAIF,CAAC,EACAW,GAAG,IAAI;QACNT,OAAO,CAACC,GAAG,CAACQ,GAAG,CAAC;QAChB,IAAI,OAAQA,GAAG,CAACC,KAAM,IAAI,QAAQ,EAAE;UAClC,IAAI,CAACC,OAAO,GAAGF,GAAG,CAACC,KAAK;SACzB,MAAM;UACL,IAAI,CAACC,OAAO,GAAGF,GAAG,CAACC,KAAK,CAACA,KAAK,CAAC,CAAC,CAAC,CAACE,GAAG;UACrC;;MAEJ,CAAC,CACF;KACF,MACI;MACH,IAAI,CAACD,OAAO,GAAG,mCAAmC;;EAEtD;;AAtDWzB,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAA2B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MC0D3BC,8BAA8D;MAOlCA,yBAAiE;MACrEA,iBAAS;MACTA,+BAAiD;MAGNA,oCAAc;MAAAA,iBAAK;MAEtDA,gCAAwB;MAGuCA,wBAAO;MAAAA,iBAAQ;MAClEA,gCAAuB;MAEkCA;QAAA;MAAA,EAA4B;MADjFA,iBACkF;MAEtFA,gCAAwB;MACkCA,gCAAU;MAAAA,iBAAQ;MAExEA,gCAAuB;MAEmDA;QAAA;MAAA,EAA4B;MADlGA,iBACmG;MAKnHA,gCAAyC;MAEMA;QAAA,OAASC,WAAO;MAAA,EAAC;MAACD,uBAAM;MAAAA,iBAAS;MAE5EA,gCAA4C;MACxCA,yBACI;MAGRA,iBAAM;MAU1CA,gCAA6E;MAI7DA,yBACA;MAGAA,8BAAY;MAACA,0BAAQ;MAAAA,iBAAI;MAACA,8BAAY;MAACA,qDAAmC;MAAAA,iBAAI;;;MAvCGA,gBAA4B;MAA5BA,4CAA4B;MAOPA,eAA4B;MAA5BA,4CAA4B","names":["LoginComponent","constructor","router","ServicioLogin","ServicioEmp","nombre","contra","login","usuario","subscribe","res","usu","tipo","consultarToken","console","log","alert","emp","localStorage","setItem","puesto","jwebtoken","navigate","err","error","mensaje","msg","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\Daniel Marin\\Proyecto Angular\\netline\\src\\app\\login\\login.component.ts","C:\\Users\\Daniel Marin\\Proyecto Angular\\netline\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { EmpleadosService } from '../services/empleados.service';\nimport { LoginService } from '../services/login.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent {\n\n  usuario = {\n    nombre: \"\",\n    contra: \"\"\n  }\n\n  constructor(private router: Router, private ServicioLogin: LoginService,  private ServicioEmp: EmpleadosService) {\n\n  }\n\n  login() {\n    if (this.usuario.nombre != \"\" && this.usuario.contra != \"\") {\n      this.ServicioLogin.login(this.usuario).subscribe(\n        (res) => {\n\n          //QUIEN INICIO SESIÓN \n          if (res.usu.tipo == 1) { //Si es un Empleado \n            this.ServicioLogin.consultarToken(res.usu.nombre).subscribe(\n              (res) => {\n                console.log(res);\n                alert(\"mensaje\", \"Bienvenido al sistema: \" + res.emp.nombre);\n                localStorage.setItem(\"nombre\", res.emp.nombre);\n                localStorage.setItem(\"puesto\", res.emp.puesto);\n                localStorage.setItem(\"token\", res.emp.jwebtoken);\n                this.router.navigate(['/inicio']);\n              },\n              (err) => {\n\n              }\n            );\n          } else if (res.usu.tipo == 2) { //Si es un Cliente\n\n          }\n\n          /*console.log(res);\n          localStorage.setItem(\"mensaje\", \"Bienvenido al sistema: \" + res.usu.nombre);\n          localStorage.setItem(\"nombre\", res.usu.nombre);\n          this.router.navigate(['/inicio']);*/\n        },\n        (err) => {\n          console.log(err);\n          if (typeof (err.error) == \"string\") {\n            this.mensaje = err.error;\n          } else {\n            this.mensaje = err.error.error[0].msg;\n            //alert(err.error.error[0].msg);\n          }\n        }\n      );\n    }\n    else {\n      this.mensaje = \"Los campos no pueden estar vacios\";\n    }\n  }\n\n}\n","<!--\n<div class=\"wrapper  wrapper-full-page center\">\n    <div class=\"\">\n        <div class=\"full-page section-image\" data-color=\"black\" data-image=\"../../assets/img/fondoLogin.jpg\">\n            <div class=\"content pt-5\">\n                <div class=\"container mt-5\">\n                    <div class=\"col-md-4 col-sm-6 ml-auto mr-auto\">\n                        <form class=\"form\" method=\"POST\" action=\"\">\n                            <div class=\"card card-login card-hidden\">\n                                <div class=\"card-header \">\n                                    <h3 class=\"header text-center\">Iniciar Sesión</h3>\n                                </div>\n                                <div class=\"card-body \">\n                                    <div class=\"card-body\">\n                                        <div class=\"form-group\">\n                                            <label for=\"email\" class=\"col-md-6 col-form-label\">Usuario</label>\n                                            <div class=\"col-md-14\">\n                                                <input id=\"email\" type=\"email\" class=\"form-control\" name=\"email\"\n                                                    value=\"\" required autocomplete=\"email\" autofocus>\n                                            </div>\n                                            <div class=\"form-group\">\n                                                <label for=\"password\" class=\"col-md-6 col-form-label\">Contraseña</label>\n\n                                                <div class=\"col-md-14\">\n                                                    <input id=\"password\" type=\"password\" class=\"form-control\"\n                                                        name=\"password\" value=\"\" required\n                                                        autocomplete=\"current-password\">\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class=\"card-footer ml-auto mr-auto\">\n                                        <div class=\"container text-center\">\n                                            <button type=\"submit\" class=\"btn btn-warning btn-wd\">Entrar</button>\n                                        </div>\n                                        <div class=\"d-flex justify-content-between\">\n                                            <a class=\"btn btn-link\" style=\"color:#23CCEF\" href=\"\">\n                                            </a>\n                                            <a class=\"btn btn-link\" style=\"color:#23CCEF\" href=\"\">\n                                            </a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <footer class=\"footer\">\n            <div class=\"container\">\n                <nav>\n                    <p class=\"copyright text-center\">\n                        ©\n                        <script>\n                            document.write(new Date().getFullYear())\n                        </script>\n                        <a href=\"#\"> Netline </a><a href=\"#\"> Universidad Tecnologica de Jalsico </a>\n                    </p>\n                </nav>\n            </div>\n        </footer>\n    </div>\n</div>\n\n-->\n\n\n<div class=\"login-page d-flex align-items-center bg-gray-100\">\n    <div class=\"container mb-3\">\n        <div class=\"row\">\n            <div class=\"col-md-6 mx-auto\">\n                <div class=\"card\">\n                    <div class=\"card-body p-5\">\n                        <header class=\"text-center mb-5\">\n                            <img src=\"../../assets/img/logonetline.png\" alt=\"\" height=\"80px\">\n                        </header>\n                        <form class=\"login-form\" method=\"\" action=\"POST\">\n                            <div class=\"card card-login card-hidden\">\n                                <div class=\"card-header \">\n                                    <h3 class=\"header text-center\">Iniciar Sesión</h3>\n                                </div>\n                                <div class=\"card-body \">\n                                    <div class=\"card-body\">\n                                        <div class=\"form-group\">\n                                            <label for=\"email\" class=\"col-md-6 col-form-label\">Usuario</label>\n                                            <div class=\"col-md-14\">\n                                                <input id=\"email\" type=\"email\" class=\"form-control\" name=\"email\"\n                                                    value=\"\" required autocomplete=\"email\" autofocus [(ngModel)]=\"usuario.nombre\">\n                                            </div>\n                                            <div class=\"form-group\">\n                                                <label for=\"password\" class=\"col-md-6 col-form-label\">Contraseña</label>\n\n                                                <div class=\"col-md-14\">\n                                                    <input id=\"password\" type=\"password\" class=\"form-control\"\n                                                        name=\"password\" value=\"\" required autocomplete=\"current-password\" [(ngModel)]=\"usuario.contra\">\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class=\"card-footer ml-auto mr-auto\">\n                                        <div class=\"container text-center\">\n                                            <button class=\"btn btn-warning btn-wd\" (click)=\"login()\">Entrar</button>\n                                        </div>\n                                        <div class=\"d-flex justify-content-between\">\n                                            <a class=\"btn btn-link\" style=\"color:#23CCEF\" href=\"\">\n                                            </a>\n                                            <a class=\"btn btn-link\" style=\"color:#23CCEF\" href=\"\">\n                                            </a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"text-center position-absolute bottom-0 start-0 w-100 z-index-20\">\n        <div class=\"container\">\n            <nav>\n                <p class=\"copyright text-center\">\n                    ©\n                    <script>\n                        document.write(new Date().getFullYear())\n                    </script>\n                    <a href=\"#\"> Netline </a> <a href=\"#\"> Universidad Tecnologica de Jalsico </a>\n                </p>\n            </nav>\n        </div>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}