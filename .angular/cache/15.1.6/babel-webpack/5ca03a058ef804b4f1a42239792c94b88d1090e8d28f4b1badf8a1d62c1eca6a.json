{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/login.service\";\nimport * as i3 from \"../services/empleados.service\";\nimport * as i4 from \"@angular/forms\";\nexport class LoginComponent {\n  constructor(router, ServicioLogin, ServicioEmp) {\n    this.router = router;\n    this.ServicioLogin = ServicioLogin;\n    this.ServicioEmp = ServicioEmp;\n    this.usuario = {\n      nombre: \"\",\n      contra: \"\"\n    };\n  }\n  login() {\n    if (this.usuario.nombre != \"\" && this.usuario.contra != \"\") {\n      this.ServicioLogin.login(this.usuario).subscribe(res => {\n        this.ServicioLogin.consultarToken(res.usu.nombre).subscribe(res => {\n          if (res.emp.estatus == 'Activo' || res.emp.estatus == 'activo') {\n            console.log(res);\n            setTimeout(() => {\n              location.reload();\n            }, 2000);\n            alert(\"Bienvenido al sistema: \" + res.emp.nombre);\n            localStorage.setItem(\"nombre\", res.emp.nombre);\n            localStorage.setItem(\"apellido\", res.emp.apellido);\n            localStorage.setItem(\"puesto\", res.emp.puesto);\n            localStorage.setItem(\"imagen\", res.emp.imagen);\n            localStorage.setItem(\"token\", res.emp.jwebtoken);\n            this.router.navigate(['/private/inicio']);\n            console.log(res);\n          } else if (res.emp.estatus == 'Inactivo' || res.emp.estatus == 'inactivo') {\n            alert(\"Error al iniciar sesión, vuelve a intentarlo\");\n          }\n        }, err => {\n          console.log(err);\n          if (typeof err.error == \"string\") {\n            console.log(err.error);\n          } else {\n            console.log(err.error.error[0].msg);\n            //alert(err.error.error[0].msg);\n          }\n        });\n      }, err => {\n        console.log(err);\n        if (typeof err.error == \"string\") {\n          console.log(err.error);\n        } else {\n          console.log(err.error.error[0].msg);\n          //alert(err.error.error[0].msg);\n        }\n      });\n    } else {\n      alert(\"Los campos no pueden estar vacios\");\n    }\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.LoginService), i0.ɵɵdirectiveInject(i3.EmpleadosService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 41,\n  vars: 2,\n  consts: [[1, \"login-page\", \"d-flex\", \"align-items-center\", \"bg-gray-100\"], [1, \"container\", \"mb-3\"], [1, \"row\"], [1, \"col-md-6\", \"mx-auto\"], [1, \"card\"], [1, \"card-body\", \"p-5\"], [1, \"text-center\", \"mb-5\"], [\"src\", \"../../assets/img/logonetline.png\", \"alt\", \"\", \"height\", \"80px\"], [\"method\", \"POST\", \"action\", \"\", 1, \"\"], [1, \"card\", \"card-login\", \"card-hidden\"], [1, \"card-header\"], [1, \"header\", \"text-center\"], [1, \"card-body\"], [1, \"form-group\"], [\"for\", \"email\", 1, \"col-md-6\", \"col-form-label\"], [1, \"col-md-14\"], [\"id\", \"email\", \"type\", \"email\", \"name\", \"email\", \"value\", \"\", \"required\", \"\", \"autocomplete\", \"email\", \"autofocus\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"password\", 1, \"col-md-6\", \"col-form-label\"], [\"id\", \"contra\", \"type\", \"password\", \"name\", \"contra\", \"value\", \"\", \"required\", \"\", \"autocomplete\", \"current-password\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"card-footer\", \"ml-auto\", \"mr-auto\"], [1, \"container\", \"text-center\"], [1, \"btn\", \"btn-warning\", \"btn-wd\", 3, \"click\"], [1, \"d-flex\", \"justify-content-between\"], [\"href\", \"\", 1, \"btn\", \"btn-link\", 2, \"color\", \"#23CCEF\"], [1, \"text-center\", \"position-absolute\", \"bottom-0\", \"start-0\", \"w-100\", \"z-index-20\"], [1, \"container\"], [1, \"copyright\", \"text-center\"], [\"href\", \"#\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"header\", 6);\n      i0.ɵɵelement(7, \"img\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"form\", 8)(9, \"div\", 9)(10, \"div\", 10)(11, \"h3\", 11);\n      i0.ɵɵtext(12, \"Iniciar Sesi\\u00F3n\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"div\", 12)(14, \"div\", 12)(15, \"div\", 13)(16, \"label\", 14);\n      i0.ɵɵtext(17, \"Usuario\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 15)(19, \"input\", 16);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_19_listener($event) {\n        return ctx.usuario.nombre = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(20, \"div\", 13)(21, \"label\", 17);\n      i0.ɵɵtext(22, \"Contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"div\", 15)(24, \"input\", 18);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_24_listener($event) {\n        return ctx.usuario.contra = $event;\n      });\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(25, \"div\", 19)(26, \"div\", 20)(27, \"button\", 21);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_27_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵtext(28, \"Entrar\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(29, \"div\", 22);\n      i0.ɵɵelement(30, \"a\", 23)(31, \"a\", 23);\n      i0.ɵɵelementEnd()()()()()()()()()();\n      i0.ɵɵelementStart(32, \"div\", 24)(33, \"div\", 25)(34, \"nav\")(35, \"p\", 26);\n      i0.ɵɵtext(36, \" \\u00A9 \");\n      i0.ɵɵelementStart(37, \"a\", 27);\n      i0.ɵɵtext(38, \" Netline \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"a\", 27);\n      i0.ɵɵtext(40, \" Universidad Tecnologica de Jalsico \");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(19);\n      i0.ɵɵproperty(\"ngModel\", ctx.usuario.nombre);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.usuario.contra);\n    }\n  },\n  dependencies: [i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}